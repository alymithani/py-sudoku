import pytest
import sudoku
from sudoku import solve
import board_gen
from board_gen import open_file, reflect_x, reflect_y, rotate, generate

def test_open_file():
    board = open_file("./seeds/easy.txt")
    board_easy = [[9,1,0,7,0,0,0,0,0],
                 [0,3,2,6,0,9,0,8,0],
                 [0,0,7,0,8,0,9,0,0],
                 [0,8,6,0,3,0,1,7,0],
                 [3,0,0,0,0,0,0,0,6],
                 [0,5,1,0,2,0,8,4,0],
                 [0,0,9,0,5,0,3,0,0],
                 [0,2,0,3,0,1,4,9,0],
                 [0,0,0,0,0,2,0,6,1]]
    assert board == board_easy, "open_file test #1 failed"

    board = open_file("./seeds/medium.txt")
    board_medium = [[0,0,0,0,0,0,0,7,0],
                   [0,7,3,0,5,0,9,2,0],
                   [0,9,0,0,8,0,0,1,5],
                   [7,0,0,0,0,1,0,5,0],
                   [0,0,8,0,9,0,2,0,0],
                   [0,4,0,6,0,0,0,0,8],
                   [9,6,0,0,1,0,0,4,0],
                   [0,8,7,0,3,0,5,9,0],
                   [0,5,0,0,0,0,0,0,0]]
    assert board == board_medium, "open_file test #2 failed"
    
    board = open_file("./seeds/hard.txt")
    board_hard = [[8,0,0,0,0,0,6,4,0],
                 [0,9,0,0,0,5,2,0,1],
                 [0,0,0,9,4,0,0,0,0],
                 [0,4,0,0,3,0,0,0,0],
                 [1,0,9,0,7,0,8,0,4],
                 [0,0,0,0,6,0,0,7,0],
                 [0,0,0,0,2,8,0,0,0],
                 [9,0,1,3,0,0,0,8,0],
                 [0,8,3,0,0,0,0,0,5]]
    assert board == board_hard, "open_file test #3 failed"


    board = open_file("./seeds/very_hard.txt")
    board_very_hard = [[0,0,0,0,0,7,0,8,5],
                      [0,0,0,0,0,0,0,6,0],
                      [0,9,0,0,2,0,0,0,3],
                      [7,2,4,1,0,0,0,0,8],
                      [0,0,0,5,0,4,0,0,0],
                      [5,0,0,0,0,2,1,4,6],
                      [8,0,0,0,6,0,0,3,0],
                      [0,7,0,0,0,0,0,0,0],
                      [4,1,0,9,0,0,0,0,0]]
    assert board == board_very_hard, "open_file test #4 failed"

def test_reflect_x():
    board = [[7,0,0,0,9,0,0,0,0],
            [9,2,0,1,0,8,0,3,0],
            [0,1,5,3,0,7,2,0,0],
            [6,7,0,0,0,0,0,2,0],
            [0,0,4,6,0,5,3,0,0],
            [0,5,0,0,0,0,0,9,8],
            [0,0,2,7,0,9,8,6,0],
            [0,6,0,4,0,3,0,5,7],
            [0,0,0,0,5,0,0,0,2]]
    board_reflected_x = [[0,0,0,0,5,0,0,0,2],
                        [0,6,0,4,0,3,0,5,7],
                        [0,0,2,7,0,9,8,6,0],
                        [0,5,0,0,0,0,0,9,8],
                        [0,0,4,6,0,5,3,0,0],
                        [6,7,0,0,0,0,0,2,0],
                        [0,1,5,3,0,7,2,0,0],
                        [9,2,0,1,0,8,0,3,0],
                        [7,0,0,0,9,0,0,0,0]]
    reflect_x(board)
    assert board == board_reflected_x, "reflect_x test #1 failed"

    board = [[0,7,0,0,0,0,0,0,0],
            [0,2,8,0,5,0,7,1,0],
            [1,3,0,0,9,0,0,4,0],
            [0,4,0,3,0,0,0,0,2],
            [0,0,2,0,1,0,6,0,0],
            [8,0,0,0,0,9,0,7,0],
            [0,1,0,0,2,0,0,9,7],
            [0,8,5,0,7,0,1,6,0],
            [0,0,0,0,0,0,0,8,0]]
    board_reflected_x = [[0,0,0,0,0,0,0,8,0],
                        [0,8,5,0,7,0,1,6,0],
                        [0,1,0,0,2,0,0,9,7],
                        [8,0,0,0,0,9,0,7,0],
                        [0,0,2,0,1,0,6,0,0],
                        [0,4,0,3,0,0,0,0,2],
                        [1,3,0,0,9,0,0,4,0],
                        [0,2,8,0,5,0,7,1,0],
                        [0,7,0,0,0,0,0,0,0]]
    reflect_x(board)
    assert board == board_reflected_x, "reflect_x test #2 failed"

    board = [[5,0,0,0,0,0,2,6,0],
            [0,8,0,0,0,7,4,0,9],
            [0,0,0,8,6,0,0,0,0],
            [0,6,0,0,1,0,0,0,0],
            [9,0,8,0,3,0,5,0,6],
            [0,0,0,0,2,0,0,3,0],
            [0,0,0,0,4,5,0,0,0],
            [8,0,9,1,0,0,0,5,0],
            [0,5,1,0,0,0,0,0,7]]
    board_reflected_x = [[0,5,1,0,0,0,0,0,7],
                        [8,0,9,1,0,0,0,5,0],
                        [0,0,0,0,4,5,0,0,0],
                        [0,0,0,0,2,0,0,3,0],
                        [9,0,8,0,3,0,5,0,6],
                        [0,6,0,0,1,0,0,0,0],
                        [0,0,0,8,6,0,0,0,0],
                        [0,8,0,0,0,7,4,0,9],
                        [5,0,0,0,0,0,2,6,0]]
    reflect_x(board)
    assert board == board_reflected_x, "reflect_x test #3 failed"

def test_reflect_y():
    board = [[0,0,0,0,4,0,0,0,9],
            [0,1,0,8,0,6,0,7,4],
            [0,0,7,9,0,1,5,6,0],
            [0,7,0,0,0,0,0,9,3],
            [0,0,1,5,0,3,2,0,0],
            [8,4,0,0,0,0,0,5,0],
            [0,3,8,4,0,9,7,0,0],
            [9,5,0,1,0,2,0,3,0],
            [7,0,0,0,5,0,0,0,0]]
    board_reflected_y = [[9,0,0,0,4,0,0,0,0],
                        [4,7,0,6,0,8,0,1,0],
                        [0,6,5,1,0,9,7,0,0],
                        [3,9,0,0,0,0,0,7,0],
                        [0,0,2,3,0,5,1,0,0],
                        [0,5,0,0,0,0,0,4,8],
                        [0,0,7,9,0,4,8,3,0],
                        [0,3,0,2,0,1,0,5,9],
                        [0,0,0,0,5,0,0,0,7]]
    reflect_y(board)
    assert board == board_reflected_y, "reflect_y test #1 failed"

    board = [[0,0,0,8,0,0,3,0,0],
            [0,8,3,0,0,9,4,6,5],
            [0,1,0,0,6,0,0,8,0],
            [0,0,0,0,0,4,0,0,0],
            [0,5,6,0,3,0,2,1,0],
            [0,0,0,2,0,0,0,0,0],
            [0,3,0,0,7,0,0,5,0],
            [8,7,2,5,0,0,9,3,0],
            [0,0,5,0,0,6,0,0,0]]
    board_reflected_y = [[0,0,3,0,0,8,0,0,0],
                        [5,6,4,9,0,0,3,8,0],
                        [0,8,0,0,6,0,0,1,0],
                        [0,0,0,4,0,0,0,0,0],
                        [0,1,2,0,3,0,6,5,0],
                        [0,0,0,0,0,2,0,0,0],
                        [0,5,0,0,7,0,0,3,0],
                        [0,3,9,0,0,5,2,7,8],
                        [0,0,0,6,0,0,5,0,0]]
    reflect_y(board)
    assert board == board_reflected_y, "reflect_y test #2 failed"

    board = [[9,0,0,0,7,0,0,8,0],
            [0,8,0,2,0,0,0,0,9],
            [0,0,0,0,8,0,0,7,3],
            [0,0,8,0,0,0,0,3,0],
            [0,0,2,3,4,5,6,0,0],
            [0,1,0,0,0,0,9,0,0],
            [5,6,0,0,9,0,0,0,0],
            [2,0,0,0,0,4,0,9,0],
            [0,7,0,0,2,0,0,0,1]]
    board_reflected_y = [[0,8,0,0,7,0,0,0,9],
                        [9,0,0,0,0,2,0,8,0],
                        [3,7,0,0,8,0,0,0,0],
                        [0,3,0,0,0,0,8,0,0],
                        [0,0,6,5,4,3,2,0,0],
                        [0,0,9,0,0,0,0,1,0],
                        [0,0,0,0,9,0,0,6,5],
                        [0,9,0,4,0,0,0,0,2],
                        [1,0,0,0,2,0,0,7,0]]
    reflect_y(board)
    assert board == board_reflected_y, "reflect_y test #3 failed"

def test_rotate():
    board = [[9,3,0,7,0,0,0,0,0],
            [0,5,1,9,0,6,0,7,0],
            [0,0,6,0,4,0,5,0,0],
            [0,1,2,0,7,0,9,4,0],
            [3,0,0,0,0,0,0,0,6],
            [0,8,9,0,6,0,3,2,0],
            [0,0,5,0,2,0,8,0,0],
            [0,2,0,5,0,3,7,6,0],
            [0,0,0,0,0,8,0,9,5]]
    board_rotated = [[9,3,0,7,0,0,0,0,0],
                    [0,5,1,9,0,6,0,7,0],
                    [0,0,6,0,4,0,5,0,0],
                    [0,1,2,0,7,0,9,4,0],
                    [3,0,0,0,0,0,0,0,6],
                    [0,8,9,0,6,0,3,2,0],
                    [0,0,5,0,2,0,8,0,0],
                    [0,2,0,5,0,3,7,6,0],
                    [0,0,0,0,0,8,0,9,5]]
    rotate(board)
    assert board == board_rotated, "rotate test #1 failed"

    board = [[0,0,0,0,0,0,0,3,0],
            [0,3,1,0,5,0,4,6,0],
            [0,4,0,0,7,0,0,2,5],
            [3,0,0,0,0,2,0,5,0],
            [0,0,7,0,4,0,6,0,0],
            [0,8,0,9,0,0,0,0,7],
            [4,9,0,0,2,0,0,8,0],
            [0,7,3,0,1,0,5,4,0],
            [0,5,0,0,0,0,0,0,0]]
    board_rotated = [[0,0,0,0,0,0,0,3,0],
                    [0,3,1,0,5,0,4,6,0],
                    [0,4,0,0,7,0,0,2,5],
                    [3,0,0,0,0,2,0,5,0],
                    [0,0,7,0,4,0,6,0,0],
                    [0,8,0,9,0,0,0,0,7],
                    [4,9,0,0,2,0,0,8,0],
                    [0,7,3,0,1,0,5,4,0],
                    [0,5,0,0,0,0,0,0,0]]
    rotate(board)
    assert board == board_rotated, "rotate test #2 failed"

    board = [[3,0,0,0,0,0,9,7,0],
            [0,7,0,0,0,9,4,0,6],
            [0,0,0,7,1,0,0,0,0],
            [0,2,0,0,8,0,0,0,0],
            [5,0,7,0,2,0,6,0,4],
            [0,0,0,0,9,0,0,5,0],
            [0,0,0,0,5,6,0,0,0],
            [4,0,1,3,0,0,0,6,0],
            [0,5,8,0,0,0,0,0,7]]
    board_rotated = [[3,0,0,0,0,0,9,7,0],
                    [0,7,0,0,0,9,4,0,6],
                    [0,0,0,7,1,0,0,0,0],
                    [0,2,0,0,8,0,0,0,0],
                    [5,0,7,0,2,0,6,0,4],
                    [0,0,0,0,9,0,0,5,0],
                    [0,0,0,0,5,6,0,0,0],
                    [4,0,1,3,0,0,0,6,0],
                    [0,5,8,0,0,0,0,0,7]]
    rotate(board)
    assert board == board_rotated, "rotate test #3 failed"

def test_generate():
    board = generate('easy')
    assert solve(board), "generate test #1 failed"

    board = generate('medium')
    assert solve(board), "generate test #2 failed"

    board = generate('hard')
    assert solve(board), "generate test #3 failed"

    board = generate('very_hard')
    assert solve(board), "generate test #4 failed"